<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: head('Dashboard', ~{})}"></head>

<body>
<div class="dashboard-wrapper">

    <aside th:replace="~{fragments/layout :: sidebar('dashboard', ${currentUser})}"></aside>

    <main class="main-content">
        <header class="content-header">
            <div class="header-left">
                <h1 class="page-title">My Document Chats</h1>
                <p class="page-subtitle" th:text="${allChats.size() + ' documents'}">0 documents</p>
            </div>
            <button class="upload-btn" onclick="showUploadModal()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span>Upload New File</span>
            </button>
        </header>

        <div class="info-banner">
            <svg class="info-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 14V10M10 6H10.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <p>One File = One Chat: Each document gets its own dedicated conversation. Click any card below to continue chatting with that specific file.</p>
        </div>

        <div class="documents-grid">
            <div th:each="chat : ${allChats}" class="doc-card"
                 th:onclick="|window.location.href='/chats/select/' + ${chat.chatId}|"
                 style="cursor: pointer;">

                <div class="doc-card-header">
                    <div class="doc-file-info">
                        <svg class="file-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="#5D5DFE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M14 2V8H20" stroke="#5D5DFE" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="doc-filename" th:text="${chat.filename}">Filename.pdf</span>
                    </div>

                    <span th:class="'status-badge ' + ${chat.documentStatus.toString().toLowerCase()}"
                          th:text="${chat.documentStatus}">Ready</span>
                </div>

                <div class="doc-card-body">
                    <p class="doc-date" th:text="${#temporals.format(chat.uploadedAt, 'MMM dd, yyyy')}">Dec 20, 2024</p>
                    <p class="doc-preview" th:text="${chat.title}">Chat Title Preview</p>
                </div>
            </div>

            <div class="doc-card start-new-card" onclick="showUploadModal()" style="cursor: pointer;">
                <div class="start-new-content">
                    <svg class="plus-icon" width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M24 12V36M12 24H36" stroke="#5D5DFE" stroke-width="3" stroke-linecap="round"/>
                    </svg>
                    <p class="start-new-text">Start New Chat</p>
                    <p class="start-new-subtext">Upload a document</p>
                </div>
            </div>
        </div>
    </main>
</div>

<div th:replace="~{fragments/modals :: upload-modal}"></div>

<button th:replace="~{fragments/layout :: mobile-toggle}"></button>

<th:block th:replace="~{fragments/scripts :: common-scripts}"></th:block>

</body>
</html>