<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - KnowledgeHub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/dashboard.css">
    <link rel="stylesheet" href="/css/settings.css">
    <style>
        /* Дефинираме стила за твоя малък блок за грешки */
        .error-block {
            color: #ef4444; /* Ярко червено (Tailwind style) */
            display: block;  /* За да отиде на нов ред под инпута */
            margin-top: 5px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* Опционално: червена рамка за самия инпут при грешка */
        .input-error {
            border-color: #ef4444 !important;
        }
    </style>
</head>
<body>
    <div class="dashboard-wrapper">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Logo -->
            <div class="sidebar-logo">
                <span class="logo-icon">K</span>
                <span class="logo-text">KnowledgeHub</span>
            </div>

            <!-- Navigation -->
            <nav class="sidebar-nav">
                <a href="/dashboard" class="nav-item">
                    <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 10L10 3L17 10M7 18V12H13V18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="/admin/monitor" class="nav-item">
                    <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 2L3 6V18C3 18.5304 3.21071 19.0391 3.58579 19.4142C3.96086 19.7893 4.46957 20 5 20H15C15.5304 20 16.0391 19.7893 16.4142 19.4142C16.7893 19.0391 17 18.5304 17 18V6L11 2M9 2H11M9 2V8H11V2M5 20V9H15V20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Admin Monitor</span>
                </a>
                <a href="/settings" class="nav-item active">
                    <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 12C11.1046 12 12 11.1046 12 10C12 8.89543 11.1046 8 10 8C8.89543 8 8 8.89543 8 10C8 11.1046 8.89543 12 10 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16.658 13.6906C16.5408 13.9158 16.4914 14.1716 16.5158 14.4245C16.5402 14.6774 16.6373 14.9158 16.7947 15.1097C16.9521 15.3036 17.1622 15.4445 17.3976 15.5144C17.633 15.5842 17.8833 15.5798 18.1159 15.5019L18.7416 15.2922C18.9742 15.2142 19.1787 15.0661 19.3292 14.8659C19.4796 14.6657 19.5693 14.4223 19.5865 14.1676C19.6037 13.9129 19.5476 13.6581 19.4249 13.4369L18.6866 12.2387C18.5639 12.0175 18.3814 11.8396 18.1622 11.7263C17.943 11.613 17.6966 11.5691 17.453 11.6004C17.2095 11.6317 16.9796 11.7368 16.7947 11.9022C16.6098 12.0677 16.4783 12.2862 16.4171 12.5287L16.2249 13.2906C16.1881 13.4214 16.1694 13.5569 16.1694 13.6931C16.1694 13.8293 16.1881 13.9648 16.2249 14.0956L16.658 13.6906Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3.34202 6.30937C3.45918 6.08422 3.50862 5.82843 3.48418 5.57554C3.45974 5.32264 3.36273 5.08416 3.20533 4.89031C3.04793 4.69646 2.83776 4.55546 2.60237 4.48563C2.36697 4.41581 2.11666 4.42018 1.88406 4.49806L1.25838 4.70781C1.02578 4.78569 0.821304 4.93382 0.670829 5.13404C0.520354 5.33426 0.430718 5.57766 0.413527 5.83237C0.396336 6.08707 0.452408 6.34187 0.575117 6.56312L1.31344 7.76125C1.43615 7.9825 1.61863 8.16039 1.83781 8.27369C2.05699 8.38699 2.30341 8.43086 2.54696 8.39959C2.79051 8.36832 3.0204 8.26316 3.20533 8.09775C3.39026 7.93234 3.52173 7.71378 3.58289 7.47131L3.77506 6.70937C3.81185 6.57864 3.83058 6.44306 3.83058 6.30687C3.83058 6.17069 3.81185 6.03511 3.77506 5.90437L3.34202 6.30937Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16.658 6.30937L16.2249 5.90437C16.1881 5.77364 16.1694 5.63806 16.1694 5.50187C16.1694 5.36569 16.1881 5.23011 16.2249 5.09937L16.4171 4.3375C16.4783 4.09503 16.6098 3.87647 16.7947 3.71106C16.9796 3.54565 17.2095 3.44049 17.453 3.40922C17.6966 3.37795 17.943 3.42182 18.1622 3.53512C18.3814 3.64842 18.5639 3.82631 18.6866 4.04756L19.4249 5.24569C19.5476 5.46694 19.6037 5.72174 19.5865 5.97644C19.5693 6.23115 19.4796 6.47455 19.3292 6.67477C19.1787 6.87499 18.9742 7.02312 18.7416 7.101L18.1159 7.31075C17.8833 7.38863 17.633 7.38426 17.3976 7.31444C17.1622 7.24462 16.9521 7.10362 16.7947 6.90977C16.6373 6.71592 16.5402 6.47744 16.5158 6.22454C16.4914 5.97165 16.5408 5.71586 16.658 5.49071L16.658 6.30937Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3.34202 13.6906L3.77506 14.0956C3.81185 14.2264 3.83058 14.3619 3.83058 14.4981C3.83058 14.6343 3.81185 14.7698 3.77506 14.9006L3.58289 15.6625C3.52173 15.905 3.39026 16.1235 3.20533 16.2889C3.0204 16.4544 2.79051 16.5595 2.54696 16.5908C2.30341 16.6221 2.05699 16.5782 1.83781 16.4649C1.61863 16.3516 1.43615 16.1737 1.31344 15.9525L0.575117 14.7543C0.452408 14.5331 0.396336 14.2783 0.413527 14.0236C0.430718 13.7689 0.520354 13.5255 0.670829 13.3253C0.821304 13.125 1.02578 12.9769 1.25838 12.899L1.88406 12.6893C2.11666 12.6114 2.36697 12.6158 2.60237 12.6856C2.83776 12.7554 3.04793 12.8964 3.20533 13.0903C3.36273 13.2842 3.45974 13.5226 3.48418 13.7755C3.50862 14.0284 3.45918 14.2842 3.34202 14.5094L3.34202 13.6906Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Settings</span>
                </a>
            </nav>

            <!-- User Profile -->
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">JD</div>
                    <div class="user-info">
                        <div class="user-name">John Doe</div>
                        <div class="user-plan">Free Plan</div>
                    </div>
                </div>
                <a href="/index" class="logout-btn">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 2H4C3.46957 2 2.96086 2.21071 2.58579 2.58579C2.21071 2.96086 2 3.46957 2 4V14C2 14.5304 2.21071 15.0391 2.58579 15.4142C2.96086 15.7893 3.46957 16 4 16H7M12 13L16 9M16 9L12 5M16 9H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Logout</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content settings-content">
            <!-- Page Header -->
            <header class="settings-header">
                <div class="header-content">
                    <h1 class="page-title">Settings</h1>
                    <p class="page-subtitle">Manage your account and preferences</p>
                </div>
            </header>

            <!-- Settings Sections -->
            <div class="settings-sections">
                <!-- Profile Section -->
                <div class="settings-card">
                    <div class="card-header">
                        <div class="header-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Profile</h2>
                    </div>
                    <div class="card-body">
                        <form class="settings-form" th:action="@{/settings/changeInfo}" th:method="post" th:object="${changeProfileDto}">
                            <div class="form-group">
                                <label for="fullName" class="form-label">Full Name</label>
                                <input type="text"
                                       id="fullName"
                                       th:field="*{fullName}"
                                       class="form-input"
                                       required
                                       minlength="3"
                                       maxlength="20"
                                       th:classappend="${#fields.hasErrors('fullName')} ? 'input-error'">
                                <small th:if="${#fields.hasErrors('fullName')}" th:errors="*{fullName}" class="error-block"></small>
                            </div>

                            <div class="form-group">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email"
                                       id="email"
                                       th:field="*{email}"
                                       class="form-input"
                                       required
                                       th:classappend="${#fields.hasErrors('email')} ? 'input-error'">
                                <small th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="error-block"></small>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn-primary">Save Changes</button>
                            </div>
                        </form>
                    </div>
                </div>

<!--                &lt;!&ndash; Notifications Section &ndash;&gt;-->
<!--                <div class="settings-card">-->
<!--                    <div class="card-header">-->
<!--                        <div class="header-icon">-->
<!--                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--                                <path d="M18 8A6 6 0 0 0 6 8C6 5.38757 7.1371 3.16509 9 1.92188M18 8C18 9.65685 18.6716 11.1569 19.7365 12.2198M18 8V11.625M6 8C6 8.72857 6.19506 9.41165 6.5349 10M18 11.625V16C18 17.6569 16.6569 19 15 19H9C7.34315 19 6 17.6569 6 16V11.625L6.5349 10M18 11.625L19.7365 12.2198M6.5349 10L4.26352 11.2198M19.7365 12.2198L21.4731 11.625M4.26352 11.2198C4.08433 11.3115 3.87771 11.3635 3.65685 11.3635C2.74162 11.3635 2 10.6219 2 9.70664C2 9.19762 2.19506 8.73457 2.50707 8.38757L4.26352 11.2198Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>-->
<!--                            </svg>-->
<!--                        </div>-->
<!--                        <h2 class="card-title">Notifications</h2>-->
<!--                    </div>-->
<!--                    <div class="card-body">-->
<!--                        <div class="checkbox-group">-->
<!--                            <label class="checkbox-label">-->
<!--                                <span class="checkbox-text">Email Notifications: Receive updates about your chats</span>-->
<!--                                <input type="checkbox" name="emailNotifications" class="checkbox-input" checked>-->
<!--                                <span class="checkbox-custom"></span>-->
<!--                            </label>-->
<!--                            <label class="checkbox-label">-->
<!--                                <span class="checkbox-text">Processing Complete: Notify when document processing is done</span>-->
<!--                                <input type="checkbox" name="processingComplete" class="checkbox-input" checked>-->
<!--                                <span class="checkbox-custom"></span>-->
<!--                            </label>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

                <!-- Security Section -->
                <div class="settings-card">
                    <div class="card-header">
                        <div class="header-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 11H5C3.89543 11 3 11.8954 3 13V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V13C21 11.8954 20.1046 11 19 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Security</h2>
                    </div>
                    <div class="card-body">
                        <form class="settings-form" th:action="@{/settings/changeUserPassword}" th:method="post" th:object="${changeUserPasswordDto}">

                            <div class="form-group">
                                <label for="newPassword" class="form-label">New Password</label>
                                <input type="password"
                                       id="newPassword"
                                       th:field="*{password}"
                                       class="form-input"
                                       required
                                       minlength="3"
                                       maxlength="20"
                                       th:classappend="${#fields.hasErrors('password')} ? 'input-error'">
                                <small class="error-block" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></small>
                            </div>

                            <div class="form-group">
                                <label for="confirmPassword" class="form-label">Confirm Password</label>
                                <input type="password"
                                       id="confirmPassword"
                                       th:field="*{confirmPassword}"
                                       class="form-input"
                                       required
                                       minlength="3"
                                       maxlength="20"
                                       th:classappend="${#fields.hasErrors('confirmPassword') || #fields.hasGlobalErrors()} ? 'input-error'">
                                <small class="error-block" th:if="${#fields.hasErrors('confirmPassword')}" th:errors="*{confirmPassword}"></small>
                            </div>

                            <div th:if="${#fields.hasGlobalErrors()}">
                                <small class="error-block" th:each="err : ${#fields.globalErrors()}" th:text="${err}"></small>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn-primary">Update Password</button>
                            </div>
                        </form>
                    </div>
                </div>

<!--                &lt;!&ndash; Subscription Section &ndash;&gt;-->
<!--                <div class="settings-card">-->
<!--                    <div class="card-header">-->
<!--                        <div class="header-icon">-->
<!--                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--                                <path d="M3 10H21M7 15H17M5 20H19C20.1046 20 21 19.1046 21 18V6C21 4.89543 20.1046 4 19 4H5C3.89543 4 3 4.89543 3 6V18C3 19.1046 3.89543 20 5 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>-->
<!--                            </svg>-->
<!--                        </div>-->
<!--                        <h2 class="card-title">Subscription</h2>-->
<!--                    </div>-->
<!--                    <div class="card-body">-->
<!--                        <div class="subscription-info">-->
<!--                            <div class="plan-badge">-->
<!--                                <span class="plan-label">Current Plan</span>-->
<!--                                <span class="plan-tag">Free</span>-->
<!--                            </div>-->
<!--                            <p class="plan-description">Free - 5 documents per month</p>-->
<!--                            <button type="button" class="btn-upgrade">Upgrade to Pro</button>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

                <div class="settings-card danger-zone">
                    <div class="card-header danger-header">
                        <div class="header-icon danger-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 6H5H21M8 6V4C8 3.46957 10 2 10 2H14C14.5304 2 16 3.46957 16 4V6M19 6V20C19 22 17 22 17 22H7C5 22 5 20.5304 5 20V6H19Z"/>
                            </svg>
                        </div>
                        <h2 class="card-title danger-title">Danger Zone</h2>
                    </div>
                    <div class="card-body">
                        <div class="danger-content">
                            <p class="danger-text">
                                <strong>Deactivate Account:</strong> This will disable your access to KnowledgeHub.
                                Your data will be preserved but you will be logged out immediately.
                            </p>
                            <form th:action="@{/settings}" th:method="delete">
                                <button type="submit" class="btn-danger"
                                        onclick="return confirm('Are you sure you want to deactivate your account?')">
                                    Deactivate My Account
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
    </button>

    <script src="/js/dashboard.js"></script>
</body>
</html>

